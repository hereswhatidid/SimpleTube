(function(a){a.fn.simpletube=function(e){var f=a.extend({feedid:"LieNielsenToolworks",startindex:1,maxresults:10,defaultvideo:"none",displaytype:"single",activeclass:"active",videowidth:450,videoheight:356,showthumbnails:true,showdescription:false,related:false,templateid:"",maintemplate:'<div class="videoholder"><div class="videooutput"><%=videoplayer%></div></div><div class="videothumbnails"><%=listitems%></div>',maintemplatebefore:'<div class="videothumbnails"><%=listitems%></div><div class="videoholder"><div class="videooutput"><%=videoplayer%></div></div>',listitemtemplate:'<div <%=videotrigger%>><img src="<%=thumbnailsrc%>" alt="<%=videotitle%>"><span class="thumbdescription"><%=videotitle%></span></div>',thumbpos:"after",onStart:null,onLoadData:null,onRender:null,onLoadVideo:null,onComplete:null},e);
if(f.related===false){f.related=1;}else{f.related=0;}var d={},c="",b={};b._tmpl=function(i,h){var g=!/\W/.test(i)?d[i]=d[i]||b._tmpl(c):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+i.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");
return h?g(h):g;};b._createTemplate=function(){var g="";if(f.templateid===""){if(f.thumbpos==="after"){g=f.maintemplate;}else{g=f.maintemplatebefore;}}else{g=document.getElementById(f.templateid).innerHTML;
}g=g.replace(/<%=videoplayer%>/,'<iframe width="<%=videowidth%>" height="<%=videoheight%>" src="http://www.youtube.com/embed/<%=defaultvideo%>" frameborder="0" allowfullscreen></iframe>');
c=g.replace(/<%=listitems%>/g,"<% for ( var i = 0, max = videos.length; i < max; i++ ) { %>"+f.listitemtemplate.replace(/<%=/g,"<%=videos[i].")+"<% } %>");
};b._trigger=function(h,i,g){a(document).trigger(h,g);if(a.isFunction(i)){i.call(undefined,g);}};return this.each(function(){var j=a(this),i=a({}),h={},g=a({});
b._createTemplate();b._trigger("st_start",f.onStart,j);switch(f.displaytype){case"single":feed_url="https://gdata.youtube.com/feeds/api/videos/"+f.feedid;
break;case"user":feed_url="https://gdata.youtube.com/feeds/api/users/"+f.feedid+"/uploads";break;default:feed_url="https://gdata.youtube.com/feeds/api/playlists/"+f.feedid;
break;}a.ajax({dataType:"jsonp",data:{v:2,alt:"jsonc","start-index":f.startindex,"max-results":f.maxresults,rel:f.related},url:feed_url}).done(function(l,m,k){b._trigger("st_loaddata",f.onLoadData,l.data.items);
h={videowidth:f.videowidth,videoheight:f.videoheight,defaultvideo:(f.defaultvideo!=="none")?f.defaultvideo:l.data.items[0].id,videos:[]};a.each(l.data.items,function(n,o){switch(f.displaytype){case"single":h.videos.push({thumbnailsrc:o.thumbnail.hqDefault,videotitle:o.title,videodescription:o.description,videoid:o.id,videotrigger:' data-videoid="'+o.id+'"'});
break;case"user":h.videos.push({thumbnailsrc:o.thumbnail.hqDefault,videotitle:o.title,videodescription:o.description,videoid:o.id,videotrigger:' data-videoid="'+o.id+'"'});
break;default:h.defaultvideo=(f.defaultvideo!=="none")?f.defaultvideo:l.data.items[0].video.id;h.videos.push({thumbnailsrc:o.video.thumbnail.hqDefault,videotitle:o.video.title,videodescription:o.video.description,videoid:o.video.id,videotrigger:' data-videoid="'+o.video.id+'"'});
break;}});j.html(b._tmpl(f.templateid,h));b._trigger("st_render",f.onRender,j);g=j.find("[data-videoid]");g.find('[data-videoid="'+h.defaultvideo+'"]').addClass(f.activeclass);
j.on("click.simpletube","[data-videoid]",function(n){g.removeClass(f.activeclass);a(this).addClass(f.activeclass);b._trigger("st_loadvideo",f.onLoadVideo,a(this).data("videoid"));
a("iframe",j).attr("src","http://www.youtube.com/embed/"+a(this).data("videoid")+"?rel="+f.related);});b._trigger("st_complete",f.onComplete,j);}).fail(function(l,m,k){j.html("Error! - "+m);
});});};a(".output").simpletube({displaytype:"user",feedid:"sweetbillypilgrim"});})(jQuery);